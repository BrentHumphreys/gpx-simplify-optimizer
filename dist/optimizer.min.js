window.style1={color:"red",opacity:.7,fillOpacity:.7,weight:5,clickable:!1},window.style2={color:"blue",opacity:1,fillOpacity:1,weight:2,clickable:!1};var LayerOptimizer=function(a){this.sourceStyle=window.style1,this.sourceLayer=a.layer,this.sourceLayerName=a.filename,this.sourceLayerData=this.getSourceData(),this.sourceLayerNodes=this.sourceLayerData.geometry.coordinates.length,this.simplifiedStyle=window.style2,this.simplifiedLayer=L.geoJson(null,{style:this.simplifiedStyle}).addTo(window.map),this.simplifiedLayerNodes=0};LayerOptimizer.prototype={getSourceData:function(){return this.sourceLayer.getLayers()[0].toGeoJSON()},optimize:function(a){this.simplifiedLayer.clearLayers(),this.simplifiedLayerData=this.getSourceData(),this.simplifiedLayerData.geometry.coordinates=simplifyGeometry(this.simplifiedLayerData.geometry.coordinates,a),this.simplifiedLayer.addData(this.simplifiedLayerData),this.simplifiedLayerNodes=this.simplifiedLayerData.geometry.coordinates.length},getBounds:function(){return this.sourceLayer.getBounds()},createLayerGroup:function(){var a={};a[this.sourceLayerName+" (simplified)"]=this.simplifiedLayer,a[this.sourceLayerName+" (source)"]=this.sourceLayer,L.control.layers(null,a).addTo(window.map)},display:function(){var a="Optimize : "+this.sourceLayerName,b="From "+this.sourceLayerNodes+" nodes to "+this.simplifiedLayerNodes+" nodes";$("#filename").html(a),$("#nodes").html(b)}};